<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¦ íŒŒì¶©ë¥˜ ë¶„ì–‘ ë§ˆì¼“í”Œë ˆì´ìŠ¤</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .header h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
        }

        .header p {
            color: #7f8c8d;
            text-align: center;
            font-size: 1.1rem;
        }

        .search-section {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .search-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .filter-group select,
        .filter-group input {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .search-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .marketplace-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .animal-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .animal-card:hover {
            transform: translateY(-5px);
        }

        .animal-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }

        .animal-info {
            padding: 20px;
        }

        .animal-name {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .animal-details {
            color: #7f8c8d;
            margin-bottom: 15px;
        }

        .animal-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 15px;
        }

        .animal-actions {
            display: flex;
            gap: 10px;
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            position: relative;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #aaa;
        }

        .close:hover {
            color: #000;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .status-available {
            background: #d4edda;
            color: #155724;
        }

        .status-sold {
            background: #f8d7da;
            color: #721c24;
        }

        .status-reserved {
            background: #fff3cd;
            color: #856404;
        }

        .morph-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 10px;
        }

        .morph-tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        .stats-section {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .stat-card {
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .search-filters {
                grid-template-columns: 1fr;
            }
            
            .marketplace-grid {
                grid-template-columns: 1fr;
            }
            
            .animal-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¦ íŒŒì¶©ë¥˜ ë¶„ì–‘ ë§ˆì¼“í”Œë ˆì´ìŠ¤</h1>
            <p>ë¯¿ì„ ìˆ˜ ìˆëŠ” ë¸Œë¦¬ë”ì™€ ë§Œë‚˜ëŠ” ì•ˆì „í•œ ë¶„ì–‘ í”Œë«í¼</p>
        </div>

        <div class="stats-section">
            <h3 style="margin-bottom: 20px; color: #2c3e50;">ğŸ“Š ë§ˆì¼“í”Œë ˆì´ìŠ¤ í˜„í™©</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalAnimals">0</div>
                    <div class="stat-label">ë“±ë¡ëœ ê°œì²´</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="availableAnimals">0</div>
                    <div class="stat-label">ë¶„ì–‘ ê°€ëŠ¥</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalBreeders">0</div>
                    <div class="stat-label">ë“±ë¡ ë¸Œë¦¬ë”</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalSales">0</div>
                    <div class="stat-label">ì™„ë£Œ ê±°ë˜</div>
                </div>
            </div>
        </div>

        <div class="search-section">
            <h3 style="margin-bottom: 20px; color: #2c3e50;">ğŸ” ë¶„ì–‘ ê²€ìƒ‰</h3>
            <div class="search-filters">
                <div class="filter-group">
                    <label for="searchMorph">ëª¨í”„</label>
                    <select id="searchMorph">
                        <option value="">ì „ì²´ ëª¨í”„</option>
                        <option value="ë…¸ë©€">ë…¸ë©€</option>
                        <option value="ë¦´ë¦¬í™”ì´íŠ¸">ë¦´ë¦¬í™”ì´íŠ¸</option>
                        <option value="ì„¸ì´ë¸”">ì„¸ì´ë¸”</option>
                        <option value="ì•„ì”í‹±">ì•„ì”í‹±</option>
                        <option value="í• ë¦¬í€¸">í• ë¦¬í€¸</option>
                        <option value="í•€ìŠ¤íŠ¸ë¼ì´í”„">í•€ìŠ¤íŠ¸ë¼ì´í”„</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="searchGender">ì„±ë³„</label>
                    <select id="searchGender">
                        <option value="">ì „ì²´</option>
                        <option value="ìˆ˜ì»·">ìˆ˜ì»·</option>
                        <option value="ì•”ì»·">ì•”ì»·</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="searchGeneration">ì„¸ëŒ€</label>
                    <select id="searchGeneration">
                        <option value="">ì „ì²´ ì„¸ëŒ€</option>
                        <option value="F1">F1</option>
                        <option value="F2">F2</option>
                        <option value="F3">F3</option>
                        <option value="F4">F4</option>
                        <option value="F5">F5</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="searchPrice">ê°€ê²© ë²”ìœ„</label>
                    <select id="searchPrice">
                        <option value="">ì „ì²´ ê°€ê²©</option>
                        <option value="0-50000">5ë§Œì› ì´í•˜</option>
                        <option value="50000-100000">5-10ë§Œì›</option>
                        <option value="100000-200000">10-20ë§Œì›</option>
                        <option value="200000-500000">20-50ë§Œì›</option>
                        <option value="500000+">50ë§Œì› ì´ìƒ</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="searchStatus">ìƒíƒœ</label>
                    <select id="searchStatus">
                        <option value="">ì „ì²´ ìƒíƒœ</option>
                        <option value="available">ë¶„ì–‘ ê°€ëŠ¥</option>
                        <option value="reserved">ì˜ˆì•½ ì¤‘</option>
                        <option value="sold">ë¶„ì–‘ ì™„ë£Œ</option>
                    </select>
                </div>
            </div>
            <div class="search-buttons">
                <button class="btn btn-primary" onclick="searchAnimals()">
                    <i class="fas fa-search"></i> ê²€ìƒ‰
                </button>
                <button class="btn btn-success" onclick="showAddListingModal()">
                    <i class="fas fa-plus"></i> ë¶„ì–‘ ë“±ë¡
                </button>
                <button class="btn btn-primary" onclick="resetFilters()">
                    <i class="fas fa-refresh"></i> í•„í„° ì´ˆê¸°í™”
                </button>
            </div>
        </div>

        <div id="marketplaceResults" class="marketplace-grid">
            <!-- ê²€ìƒ‰ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>
    </div>

    <!-- ë¶„ì–‘ ë“±ë¡ ëª¨ë‹¬ -->
    <div id="addListingModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addListingModal')">&times;</span>
            <h2 style="margin-bottom: 20px; color: #2c3e50;">ğŸ“ ë¶„ì–‘ ë“±ë¡</h2>
            
            <form id="addListingForm">
                <div class="form-group">
                    <label for="listingName">ê°œì²´ ì´ë¦„ *</label>
                    <input type="text" id="listingName" required>
                </div>
                
                <div class="form-group">
                    <label for="listingMorph">ëª¨í”„ *</label>
                    <select id="listingMorph" required>
                        <option value="">ëª¨í”„ ì„ íƒ</option>
                        <option value="ë…¸ë©€">ë…¸ë©€</option>
                        <option value="ë¦´ë¦¬í™”ì´íŠ¸">ë¦´ë¦¬í™”ì´íŠ¸</option>
                        <option value="ì„¸ì´ë¸”">ì„¸ì´ë¸”</option>
                        <option value="ì•„ì”í‹±">ì•„ì”í‹±</option>
                        <option value="í• ë¦¬í€¸">í• ë¦¬í€¸</option>
                        <option value="í•€ìŠ¤íŠ¸ë¼ì´í”„">í•€ìŠ¤íŠ¸ë¼ì´í”„</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="listingGender">ì„±ë³„ *</label>
                    <select id="listingGender" required>
                        <option value="">ì„±ë³„ ì„ íƒ</option>
                        <option value="ìˆ˜ì»·">ìˆ˜ì»·</option>
                        <option value="ì•”ì»·">ì•”ì»·</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="listingGeneration">ì„¸ëŒ€ *</label>
                    <select id="listingGeneration" required>
                        <option value="">ì„¸ëŒ€ ì„ íƒ</option>
                        <option value="F1">F1</option>
                        <option value="F2">F2</option>
                        <option value="F3">F3</option>
                        <option value="F4">F4</option>
                        <option value="F5">F5</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="listingPrice">ë¶„ì–‘ ê°€ê²© (ì›) *</label>
                    <input type="number" id="listingPrice" min="0" required>
                </div>
                
                <div class="form-group">
                    <label for="listingWeight">ë¬´ê²Œ (g)</label>
                    <input type="number" id="listingWeight" min="0">
                </div>
                
                <div class="form-group">
                    <label for="listingLength">ê¸¸ì´ (cm)</label>
                    <input type="number" id="listingLength" min="0" step="0.1">
                </div>
                
                <div class="form-group">
                    <label for="listingDescription">ìƒì„¸ ì„¤ëª…</label>
                    <textarea id="listingDescription" rows="4" placeholder="ê°œì²´ì˜ íŠ¹ì§•, ê±´ê°• ìƒíƒœ, ì‚¬ìœ¡ í™˜ê²½ ë“±ì„ ìì„¸íˆ ì„¤ëª…í•´ì£¼ì„¸ìš”."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="listingContact">ì—°ë½ì²˜ *</label>
                    <input type="text" id="listingContact" placeholder="ì „í™”ë²ˆí˜¸ ë˜ëŠ” ì¹´ì¹´ì˜¤í†¡ ID" required>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-check"></i> ë¶„ì–‘ ë“±ë¡
                    </button>
                    <button type="button" class="btn btn-primary" onclick="closeModal('addListingModal')">
                        ì·¨ì†Œ
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- ë¬¸ì˜í•˜ê¸° ëª¨ë‹¬ -->
    <div id="inquiryModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('inquiryModal')">&times;</span>
            <h2 style="margin-bottom: 20px; color: #2c3e50;">ğŸ’¬ ë¬¸ì˜í•˜ê¸°</h2>
            
            <form id="inquiryForm">
                <div class="form-group">
                    <label for="inquiryName">ì´ë¦„ *</label>
                    <input type="text" id="inquiryName" required>
                </div>
                
                <div class="form-group">
                    <label for="inquiryContact">ì—°ë½ì²˜ *</label>
                    <input type="text" id="inquiryContact" placeholder="ì „í™”ë²ˆí˜¸ ë˜ëŠ” ì¹´ì¹´ì˜¤í†¡ ID" required>
                </div>
                
                <div class="form-group">
                    <label for="inquiryMessage">ë¬¸ì˜ ë‚´ìš© *</label>
                    <textarea id="inquiryMessage" rows="5" placeholder="ë¶„ì–‘ì— ëŒ€í•œ ë¬¸ì˜ì‚¬í•­ì„ ìì„¸íˆ ì‘ì„±í•´ì£¼ì„¸ìš”." required></textarea>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-paper-plane"></i> ë¬¸ì˜ ë³´ë‚´ê¸°
                    </button>
                    <button type="button" class="btn btn-primary" onclick="closeModal('inquiryModal')">
                        ì·¨ì†Œ
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // ìƒ˜í”Œ ë¶„ì–‘ ë°ì´í„°
        let marketplaceData = [
            {
                id: "listing_001",
                name: "ë£¨ì‹œí¼",
                morph: "ë…¸ë©€",
                gender: "ìˆ˜ì»·",
                generation: "F1",
                price: 80000,
                weight: 45,
                length: 18,
                status: "available",
                description: "ê±´ê°•í•œ ë²ˆì‹ìš© ìˆ˜ì»·ì…ë‹ˆë‹¤. ì˜¨ìˆœí•œ ì„±ê²©ìœ¼ë¡œ ì´ˆë³´ìë„ ì‰½ê²Œ í‚¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                contact: "010-1234-5678",
                breeder: "í¬ë ˆìŠ¤í‹°ë“œê²Œì½” ì „ë¬¸",
                createdAt: new Date().toISOString()
            },
            {
                id: "listing_002",
                name: "ë¦´ë¦¬í™”ì´íŠ¸",
                morph: "ë¦´ë¦¬í™”ì´íŠ¸",
                gender: "ì•”ì»·",
                generation: "F1",
                price: 150000,
                weight: 42,
                length: 17,
                status: "available",
                description: "ê³ í’ˆì§ˆ ë¦´ë¦¬í™”ì´íŠ¸ ì•”ì»·ì…ë‹ˆë‹¤. ë²ˆì‹ìš©ìœ¼ë¡œ ìµœì ì˜ ìƒíƒœì…ë‹ˆë‹¤.",
                contact: "010-2345-6789",
                breeder: "í”„ë¦¬ë¯¸ì—„ ê²Œì½”",
                createdAt: new Date().toISOString()
            },
            {
                id: "listing_003",
                name: "ì„¸ì´ë¸”",
                morph: "ì„¸ì´ë¸”",
                gender: "ìˆ˜ì»·",
                generation: "F1",
                price: 120000,
                weight: 48,
                length: 19,
                status: "reserved",
                description: "ì„¸ì´ë¸” ëª¨í”„ì˜ ìš°ìˆ˜í•œ ê°œì²´ì…ë‹ˆë‹¤. ë²ˆì‹ ì„±ê³µë¥ ì´ ë†’ìŠµë‹ˆë‹¤.",
                contact: "010-3456-7890",
                breeder: "ê²Œì½” í•˜ìš°ìŠ¤",
                createdAt: new Date().toISOString()
            },
            {
                id: "listing_004",
                name: "ì•„ì”í‹±",
                morph: "ì•„ì”í‹±",
                gender: "ì•”ì»·",
                generation: "F1",
                price: 200000,
                weight: 40,
                length: 16,
                status: "available",
                description: "í¬ê·€í•œ ì•„ì”í‹± ëª¨í”„ì…ë‹ˆë‹¤. ê±´ê°• ìƒíƒœê°€ ë§¤ìš° ì¢‹ìŠµë‹ˆë‹¤.",
                contact: "010-4567-8901",
                breeder: "ì—˜ë¦¬íŠ¸ ê²Œì½”",
                createdAt: new Date().toISOString()
            },
            {
                id: "listing_005",
                name: "í• ë¦¬í€¸",
                morph: "í• ë¦¬í€¸",
                gender: "ìˆ˜ì»·",
                generation: "F1",
                price: 180000,
                weight: 46,
                length: 18.5,
                status: "sold",
                description: "í• ë¦¬í€¸ ëª¨í”„ì˜ ìµœê³  í’ˆì§ˆ ê°œì²´ì…ë‹ˆë‹¤. ì´ë¯¸ ë¶„ì–‘ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
                contact: "010-5678-9012",
                breeder: "í”„ë¦¬ë¯¸ì—„ ê²Œì½”",
                createdAt: new Date().toISOString()
            }
        ];

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = function() {
            updateStats();
            displayMarketplace();
        };

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            const totalAnimals = marketplaceData.length;
            const availableAnimals = marketplaceData.filter(item => item.status === 'available').length;
            const uniqueBreeders = [...new Set(marketplaceData.map(item => item.breeder))].length;
            const totalSales = marketplaceData.filter(item => item.status === 'sold').length;

            document.getElementById('totalAnimals').textContent = totalAnimals;
            document.getElementById('availableAnimals').textContent = availableAnimals;
            document.getElementById('totalBreeders').textContent = uniqueBreeders;
            document.getElementById('totalSales').textContent = totalSales;
        }

        // ë§ˆì¼“í”Œë ˆì´ìŠ¤ í‘œì‹œ
        function displayMarketplace(data = marketplaceData) {
            const container = document.getElementById('marketplaceResults');
            
            if (data.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 40px; color: #7f8c8d;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            let html = '';
            data.forEach(item => {
                const statusBadge = getStatusBadge(item.status);
                const morphTags = getMorphTags(item.morph);
                
                html += `
                    <div class="animal-card">
                        <div class="animal-image">
                            <i class="fas fa-dragon"></i>
                        </div>
                        <div class="animal-info">
                            ${statusBadge}
                            <div class="animal-name">${item.name}</div>
                            <div class="animal-details">
                                ${item.gender} | ${item.generation} | ${item.weight}g | ${item.length}cm<br>
                                ë¸Œë¦¬ë”: ${item.breeder}
                            </div>
                            ${morphTags}
                            <div class="animal-price">â‚©${item.price.toLocaleString()}</div>
                            <div class="animal-description">${item.description}</div>
                            <div class="animal-actions">
                                <button class="btn btn-primary btn-sm" onclick="showInquiryModal('${item.id}')">
                                    <i class="fas fa-comment"></i> ë¬¸ì˜í•˜ê¸°
                                </button>
                                <button class="btn btn-success btn-sm" onclick="viewDetails('${item.id}')">
                                    <i class="fas fa-eye"></i> ìƒì„¸ë³´ê¸°
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // ìƒíƒœ ë°°ì§€ ìƒì„±
        function getStatusBadge(status) {
            const badges = {
                'available': '<span class="status-badge status-available">ë¶„ì–‘ ê°€ëŠ¥</span>',
                'reserved': '<span class="status-badge status-reserved">ì˜ˆì•½ ì¤‘</span>',
                'sold': '<span class="status-badge status-sold">ë¶„ì–‘ ì™„ë£Œ</span>'
            };
            return badges[status] || '';
        }

        // ëª¨í”„ íƒœê·¸ ìƒì„±
        function getMorphTags(morph) {
            return `<div class="morph-tags"><span class="morph-tag">${morph}</span></div>`;
        }

        // ê²€ìƒ‰ ê¸°ëŠ¥
        function searchAnimals() {
            const morph = document.getElementById('searchMorph').value;
            const gender = document.getElementById('searchGender').value;
            const generation = document.getElementById('searchGeneration').value;
            const price = document.getElementById('searchPrice').value;
            const status = document.getElementById('searchStatus').value;

            let filteredData = marketplaceData.filter(item => {
                if (morph && item.morph !== morph) return false;
                if (gender && item.gender !== gender) return false;
                if (generation && item.generation !== generation) return false;
                if (status && item.status !== status) return false;
                
                if (price) {
                    const [min, max] = price.split('-').map(p => p === '+' ? Infinity : parseInt(p));
                    if (item.price < min || (max !== Infinity && item.price > max)) return false;
                }
                
                return true;
            });

            displayMarketplace(filteredData);
        }

        // í•„í„° ì´ˆê¸°í™”
        function resetFilters() {
            document.getElementById('searchMorph').value = '';
            document.getElementById('searchGender').value = '';
            document.getElementById('searchGeneration').value = '';
            document.getElementById('searchPrice').value = '';
            document.getElementById('searchStatus').value = '';
            
            displayMarketplace();
        }

        // ë¶„ì–‘ ë“±ë¡ ëª¨ë‹¬ í‘œì‹œ
        function showAddListingModal() {
            document.getElementById('addListingModal').style.display = 'block';
        }

        // ë¬¸ì˜í•˜ê¸° ëª¨ë‹¬ í‘œì‹œ
        function showInquiryModal(listingId) {
            const listing = marketplaceData.find(item => item.id === listingId);
            if (listing) {
                document.getElementById('inquiryModal').style.display = 'block';
                // ë¬¸ì˜ í¼ì— ê°œì²´ ì •ë³´ ì¶”ê°€
                document.getElementById('inquiryMessage').placeholder = 
                    `${listing.name} (${listing.morph}) ë¶„ì–‘ì— ëŒ€í•œ ë¬¸ì˜ì‚¬í•­ì„ ìì„¸íˆ ì‘ì„±í•´ì£¼ì„¸ìš”.`;
            }
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // ìƒì„¸ë³´ê¸°
        function viewDetails(listingId) {
            const listing = marketplaceData.find(item => item.id === listingId);
            if (listing) {
                alert(`${listing.name} ìƒì„¸ ì •ë³´:\n\n` +
                      `ëª¨í”„: ${listing.morph}\n` +
                      `ì„±ë³„: ${listing.gender}\n` +
                      `ì„¸ëŒ€: ${listing.generation}\n` +
                      `ê°€ê²©: â‚©${listing.price.toLocaleString()}\n` +
                      `ë¬´ê²Œ: ${listing.weight}g\n` +
                      `ê¸¸ì´: ${listing.length}cm\n` +
                      `ìƒíƒœ: ${getStatusText(listing.status)}\n` +
                      `ë¸Œë¦¬ë”: ${listing.breeder}\n` +
                      `ì—°ë½ì²˜: ${listing.contact}\n\n` +
                      `ì„¤ëª…: ${listing.description}`);
            }
        }

        // ìƒíƒœ í…ìŠ¤íŠ¸ ë³€í™˜
        function getStatusText(status) {
            const statusTexts = {
                'available': 'ë¶„ì–‘ ê°€ëŠ¥',
                'reserved': 'ì˜ˆì•½ ì¤‘',
                'sold': 'ë¶„ì–‘ ì™„ë£Œ'
            };
            return statusTexts[status] || status;
        }

        // ë¶„ì–‘ ë“±ë¡ í¼ ì œì¶œ
        document.getElementById('addListingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newListing = {
                id: 'listing_' + Date.now(),
                name: document.getElementById('listingName').value,
                morph: document.getElementById('listingMorph').value,
                gender: document.getElementById('listingGender').value,
                generation: document.getElementById('listingGeneration').value,
                price: parseInt(document.getElementById('listingPrice').value),
                weight: parseInt(document.getElementById('listingWeight').value) || 0,
                length: parseFloat(document.getElementById('listingLength').value) || 0,
                status: 'available',
                description: document.getElementById('listingDescription').value,
                contact: document.getElementById('listingContact').value,
                breeder: 'ë‚´ ê²Œì½” í•˜ìš°ìŠ¤',
                createdAt: new Date().toISOString()
            };
            
            marketplaceData.unshift(newListing);
            displayMarketplace();
            updateStats();
            closeModal('addListingModal');
            
            // í¼ ì´ˆê¸°í™”
            document.getElementById('addListingForm').reset();
            
            alert('ë¶„ì–‘ ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
        });

        // ë¬¸ì˜í•˜ê¸° í¼ ì œì¶œ
        document.getElementById('inquiryForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const inquiry = {
                name: document.getElementById('inquiryName').value,
                contact: document.getElementById('inquiryContact').value,
                message: document.getElementById('inquiryMessage').value,
                timestamp: new Date().toISOString()
            };
            
            // ì‹¤ì œë¡œëŠ” ì„œë²„ë¡œ ì „ì†¡í•˜ì§€ë§Œ ì—¬ê¸°ì„œëŠ” ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            const inquiries = JSON.parse(localStorage.getItem('marketplace_inquiries') || '[]');
            inquiries.push(inquiry);
            localStorage.setItem('marketplace_inquiries', JSON.stringify(inquiries));
            
            closeModal('inquiryModal');
            
            // í¼ ì´ˆê¸°í™”
            document.getElementById('inquiryForm').reset();
            
            alert('ë¬¸ì˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!\në¸Œë¦¬ë”ê°€ ê³§ ì—°ë½ë“œë¦´ ê²ƒì…ë‹ˆë‹¤.');
        });

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        };
    </script>
</body>
</html> 